#Linux用户管理

在服务端开发，为每一个人分配不同的权限是必须的。



###配置文件

####passwd

`/etc/passwd`是系统的用户配置文件，记录用户的基本信息，其格式如下：

    root:x:0:0:root:/root:/bin/bash
    用户名:口令:用户标识号:组标识号:注释性描述:主目录:默认shell 

+ **用户名**就是表示用户的字符串。
+ **口令**就是用户登录系统的密码，由于passwd文件是对所有人可读的，因此直接将口令写在passwd文件中并不安全，很多Linux系统将用户的口令写在shadow文件中。而在passwd文件中则用一个`x`表示。
+ **用户标识号** 是每一个用户唯一拥有的`uid`，取值范围是0~65535，`0`表示超级用户。1-99由系统保留，普通账号从100开始。在Linux系统中，普通uid从`500`开始。
+ **组织标号** 是gid,表示用户所属的分组。对应着`/etc/group`中的一条记录。
+ **注释性描述** 对用户信息的描述
+ **主目录** 用户登录系统后所处的目录
+ **默认shell** 用户登录后默认使用的shell


####shadow

`etc/shadow`文件记录用户的口令，只有root用户有读的权限。格式如下：

    root:$1$Uvip.QJI$GteCsLrSSfpnMs.VCOvbs/:14169:0:99999:7:::
    用户名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:保留字段

+ **用户名** 对应passwd文件中得用户名
+ **口令** 加密后的字符串，* ，!， x表示用户不能登录系统
+ **最后一次修改时间** 距上次修改密码的时间
+ **最小时间间隔** 修改密码最小时间间隔
+ **最大时间间隔** 修改密码最大时间间隔
+ **警告时间** 表示从警告到密码失效的时间间隔
+ **不活动时间** 口令取消多少天候账号失效
+ **失效时间** 账号生存期，留空表示永久有效


####group

`etc/group`记录用户组的信息，格式如下：
    
    root:x:0:root
    组名:口令:组标识号:组内用户列表

+ **组名** 用户组的名字
+ **口令** 用户组加密后的口令，密码存储在`/etc/gshadow`文件中。
+ **组标识号** gid
+ **组内用户列表** 多个用户用逗号分隔


###实例

添加一个用户组
    
    groupadd team1

添加一个用户，并且设置其口令
    
    useradd tom 
    passwd tom

将用户tom添加到team1组中
    
    usermod -a -G team1 tom

将一个文件赋予某个组权限
    chown –R username:username dir


###SSH管理

一般我们不允许root用户进行SSH登录，所以在`/ect/ssh/sshd_config`文件中，要把`PermitRootLogin`值改为no.
















